var e,n,o,t,r,u,c,s,l,i,p,d,a,f,v,S;import h from"preact";function m(e,n,o){return{negotiatorKeys:e,responderKey:n,process:o}}function R(){for(var e in d)document.addEventListener(e,O)}function y(){for(var e in d)document.removeEventListener(e,O)}function g(e){for(var n,o=[e.target],t=[e.target];t.length;)(n=t.pop()).parentElement&&(t.push(n.parentElement),o.push(n.parentElement));return o}function C(e,n,o){var t,r,u,c,s=[];for(t=0,r=n;t<r.length;t+=1)null!=(u=r[t].__v)&&"object"==typeof u.props&&null!=(c=u.props[e])&&s.push({isCapture:o,negotiator:c,props:u.props});return s}function b(e,n,o){var t,r,u,c=[];for(t=0,r=d[e].negotiatorKeys;t<r.length;t+=1)(u=r[t]).indexOf("Capture")>-1?c.push.apply(c,C(u,o,!0)):c.push.apply(c,C(u,n,!1));return c}function E(e){var n=null!=e.composedPath?e.composedPath():g(e),o=n.concat([]).reverse();return{eventPath:n,eventPathReverse:o}}function M(e,n,o){v.ResponderEventPlugin.current={responder:o[n.responderKey],eventType:e.type,responderEvent:n,props:o}}function j(e,n,o){var t=v.ResponderEventPlugin.current.props,r=t.onResponderTerminationRequest,u=t.onResponderTerminate,c=o.onResponderGrant,s=o.onResponderReject;r?r(e)?(c&&c(e),u&&u(e),M(e,n,o)):s&&s(e):(c&&c(e),u&&u(e),M(e,n,o))}function P(e){f.touchHistory.numberActiveTouches=e.touches.length}function T(e){return e.process===r.start}function x(e){return e.process===r.move}function H(e){return e.process===r.end}function K(e,n){var o,t,r,u,c=d[e.type];if(P(e),T(c)||x(c))for(o=0,t=n;o<t.length;o+=1)r=t[o],e=Object.assign({},e,{bubbles:!r.isCapture}),r.negotiator(e)&&(null==v.ResponderEventPlugin.current?M(e,c,r.props):v.ResponderEventPlugin.current.responderEvent.process!==c.process?M(e,c,r.props):j(e,c,r.props));v.ResponderEventPlugin.current.responder(e),H(c)&&0===f.touchHistory.numberActiveTouches&&((u=v.ResponderEventPlugin.current.props.onResponderRelease)&&u(e),v.ResponderEventPlugin.current.responder=null)}function O(e){var n,o;v.ResponderEventPlugin&&(o=E(n=v.ResponderEventPlugin.extractEvents(e.type,null,e,e.target).nativeEvent),K(n,b(n.type,o.eventPath,o.eventPathReverse)))}o=(e=h.options).__p,e.__p=function(e){null!=(n=e)?R():y(),o&&o(e)},t=e.__c,e.__c=function(e){var o,r,u,c,s;if(n&&v.ResponderEventPlugin)for(o=[n];o.length;)for("string"==typeof(r=o.pop()).type&&(r.__e.__v=r),u=0,c=r.__k;u<c.length;u+=1)null!=(s=c[u])&&o.push(s);t&&t(e)},function(e){e[e.start=0]="start",e[e.move=1]="move",e[e.end=2]="end"}(r||(r={})),u=["onMoveShouldSetResponderCapture","onSelectionChangeShouldSetResponderCapture","onMoveShouldSetResponder","onSelectionChangeShouldSetResponder"],c=["onScrollShouldSetResponderCapture","onScrollShouldSetResponder"],s=m(["onStartShouldSetResponderCapture","onStartShouldSetResponder"],"onResponderStart",r.start),l=m(u,"onResponderMove",r.move),i=m(c,"onResponderMove",r.move),p=m(null,"onResponderEnd",r.end),d={touchstart:s,mousedown:s,touchmove:l,mousemove:l,selectionchange:l,scroll:i,touchend:p,mouseup:p},v={};export default{injectEventPluginsByName:S=function(e){v=Object.assign({},v,e)},ResponderEventPlugin:a={current:null,extractEvents:function(e,n,o,t){return{nativeEvent:o}},eventTypes:{responderMove:{dependencies:["touchmove","mousemove"]}}},ResponderTouchHistoryStore:f={touchHistory:{numberActiveTouches:0}}};export{a as ResponderEventPlugin,f as ResponderTouchHistoryStore,S as injectEventPluginsByName};
