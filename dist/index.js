var n,e,o,t,r,u,c,i,f,s,v,l,p;import{options as a}from"preact";function d(n,e,o){return{checkerKeys:n,responderKey:e,process:o}}function m(){for(var n in f)document.addEventListener(n,K)}function h(){for(var n in f)document.removeEventListener(n,K)}function S(n){for(var e,o=[n.target],t=[n.target];t.length;)(e=t.pop()).parentElement&&(t.push(e.parentElement),o.push(e.parentElement));return o}function y(n,e,o){var t,r,u,c,i,f=[];for(t=0,r=e;t<r.length;t+=1)null!=(c=(u=r[t]).__v)&&"object"==typeof c.props&&null!=(i=c.props[n])&&f.push({isCapture:o,checker:i,props:c.props,dom:u});return f}function R(n,e,o){var t,r,u,c=[];for(t=0,r=f[n].checkerKeys;t<r.length;t+=1)(u=r[t]).indexOf("Capture")>-1?c.push.apply(c,y(u,o,!0)):c.push.apply(c,y(u,e,!1));return c}function b(n){var e=null!=n.composedPath?n.composedPath():S(n),o=e.concat([]).reverse();return{eventPath:e,eventPathReverse:o}}function E(n,e,o){l.ResponderEventPlugin.view&&(l.ResponderEventPlugin.view.event={responder:o[e],type:n.type})}function j(n,e,o,t){var r;l.ResponderEventPlugin.view={event:{responder:o[e],type:n.type},props:o,dom:t},(r=o.onResponderGrant)&&r(n)}function C(n,e,o,t){var r=T().props,u=r.onResponderTerminate,c=r.onResponderTerminationRequest,i=o.onResponderReject;c?c(n)?(j(n,e.responderKey,o,t),u&&u(n)):i&&i(n):(j(n,e.responderKey,o,t),u&&u(n))}function M(n){v.touchHistory.numberActiveTouches=n.touches.length}function P(n){return n.process===t.start}function g(n){return n.process===t.move}function x(n){return n.process===t.end}function T(){if(l.ResponderEventPlugin)return l.ResponderEventPlugin.view}function k(){var n=T();if(n)return n.event}function w(){var n=k();if(n)return n.responder}function H(n,e){var o,t,r,u,c,i,s,p,a,d=f[n.type];if(M(n),P(d)||g(d)){for(o=0,t=e;o<t.length;o+=1)r=t[o],n=Object.assign({},n,{bubbles:!r.isCapture}),r.checker(n)&&(null==(u=T())?j(n,d.responderKey,r.props,r.dom):u.dom===r.dom?E(n,d.responderKey,r.props):C(n,d,r.props,r.dom));(c=w())&&(c(n),l.ResponderEventPlugin.view.event=null)}x(d)&&null!=(i=T())&&(p=(s=i.props).onResponderRelease,(a=s.onResponderEnd)&&a(n),0===v.touchHistory.numberActiveTouches&&(p&&p(n),l.ResponderEventPlugin&&(l.ResponderEventPlugin.view=null)))}function K(n){var e,o,t;l.ResponderEventPlugin&&null!=(e=l.ResponderEventPlugin.extractEvents(n.type,{},n,n.target))&&(t=b(o=e.nativeEvent),H(o,R(o.type,t.eventPath,t.eventPathReverse)))}e=a.__p,a.__p=function(o){null!=(n=o)?m():h(),e&&e(o)},o=a.__c,a.__c=function(e){var t,r,u,c,i;if(n&&l.ResponderEventPlugin)for(t=[n];t.length;)if("string"==typeof(r=t.pop()).type&&(r.__e.__v=r),null!=r.__k&&null!=r.__k.length)for(u=0,c=r.__k;u<c.length;u+=1)null!=(i=c[u])&&t.push(i);o&&o(e)},function(n){n[n.start=0]="start",n[n.move=1]="move",n[n.end=2]="end"}(t||(t={})),r=["onMoveShouldSetResponderCapture","onMoveShouldSetResponder"],u=d(["onStartShouldSetResponderCapture","onStartShouldSetResponder"],"onResponderStart",t.start),c=d(r,"onResponderMove",t.move),i=d([],"onResponderEnd",t.end),f={touchstart:u,mousedown:u,touchmove:c,mousemove:c,touchend:i,mouseup:i},l={};export default{injectEventPluginsByName:p=function(n){l=Object.assign({},l,n)},ResponderEventPlugin:s={view:null,extractEvents:function(n,e,o,t){return{nativeEvent:o}},eventTypes:{responderMove:{dependencies:["touchmove","mousemove"]}}},ResponderTouchHistoryStore:v={touchHistory:{numberActiveTouches:0}}};export{s as ResponderEventPlugin,v as ResponderTouchHistoryStore,p as injectEventPluginsByName};
//# sourceMappingURL=index.js.map
