var e,n,r,o,t,u,p,c,i,f,l,s,v;import{options as a}from"preact";function d(e,n,r){return{prepCheckerKeys:e,prepResponderKey:n,prepProcess:r}}function m(){for(var e in i)document.addEventListener(e,K)}function h(){for(var e in i)document.removeEventListener(e,K)}function R(e){for(var n,r=[e.target],o=[e.target];o.length;)(n=o.pop().parentElement)&&(o.push(n),r.push(n));return r}function S(e,n,r){var o,t,u,p,c,i=[];for(o=0,t=n;o<t.length;o+=1)null!=(p=(u=t[o]).__v)&&"object"==typeof p.props&&null!=(c=p.props[e])&&i.push({prepIsCapture:r,prepChecker:c,prepProps:p.props,prepDom:u});return i}function y(e,n,r){var o,t,u,p=[];for(o=0,t=i[e].prepCheckerKeys;o<t.length;o+=1)(u=t[o]).indexOf("Capture")>-1?p.push.apply(p,S(u,r,!0)):p.push.apply(p,S(u,n,!1));return p}function b(e){var n=e.composedPath,r=e.path||(null!=n?n():R(e)),o=r.concat([]).reverse();return{p:r,pr:o}}function C(e,n,r){var o=r[n],t=k();t.prepView&&(t.prepView.prepEvent={prepResponder:o,prepType:e.type})}function E(e,n,r,o){var t,u=r[n];k().prepView={prepEvent:{prepResponder:u,prepType:e.type},prepProps:r,prepDom:o},(t=r.onResponderGrant)&&t(e)}function P(e,n,r,o){var t=x().prepProps,u=t.onResponderTerminate,p=t.onResponderTerminationRequest,c=r.onResponderReject;p?p(e)?(E(e,n.prepResponderKey,r,o),u&&u(e)):c&&c(e):(E(e,n.prepResponderKey,r,o),u&&u(e))}function T(e){l.touchHistory.numberActiveTouches=e.nativeEvent.touches.length}function j(e){return e.prepProcess===o.start}function M(e){return e.prepProcess===o.move}function g(e){return e.prepProcess===o.end}function k(){return s.ResponderEventPlugin}function x(){var e=k();if(e)return e.prepView}function w(){var e=x();if(e)return e.prepEvent}function D(){var e=w();if(e)return e.prepResponder}function H(e,n){var r,o,t,u,p,c,f,s,v,a,d=i[e.type];if(T(e),j(d)||M(d)){for(r=0,o=n;r<o.length;r+=1)if(t=o[r],e=Object.assign({},e,{bubbles:!t.prepIsCapture}),t.prepChecker(e)){null==(u=x())?E(e,d.prepResponderKey,t.prepProps,t.prepDom):u.prepDom===t.prepDom?C(e,d.prepResponderKey,t.prepProps):P(e,d,t.prepProps,t.prepDom);break}(p=D())&&(p(e),k().prepView.prepEvent=null)}g(d)&&null!=(c=x())&&(s=(f=c.prepProps).onResponderRelease,(v=f.onResponderEnd)&&v(e),0===l.touchHistory.numberActiveTouches&&(s&&s(e),(a=k())&&(a.prepView=null)))}function K(e){var n,r,o=k();o&&null!=(n=o.extractEvents(e.type,{},e,e.target))&&(e.nativeEvent=n.nativeEvent,r=b(e),H(e,y(e.type,r.p,r.pr)))}n=a.__p,a.__p=function(r){null!=(e=r)?m():h(),n&&n(r)},r=a.__c,a.__c=function(n){var o,t,u,p,c;if(e&&k())for(o=[e];o.length;)if("string"==typeof(t=o.pop()).type&&(t.__e.__v=t),null!=t.__k&&null!=t.__k.length)for(u=0,p=t.__k;u<p.length;u+=1)null!=(c=p[u])&&o.push(c);r&&r(n)},function(e){e[e.start=0]="start",e[e.move=1]="move",e[e.end=2]="end"}(o||(o={})),t=["onMoveShouldSetResponderCapture","onMoveShouldSetResponder"],u=d(["onStartShouldSetResponderCapture","onStartShouldSetResponder"],"onResponderStart",o.start),p=d(t,"onResponderMove",o.move),c=d([],"onResponderEnd",o.end),i={touchstart:u,mousedown:u,touchmove:p,mousemove:p,touchend:c,mouseup:c},s={};export default{injectEventPluginsByName:v=function(e){s=Object.assign({},s,e)},ResponderEventPlugin:f={prepView:null,extractEvents:function(e,n,r,o){return{nativeEvent:r}},eventTypes:{responderMove:{dependencies:["touchmove","mousemove"]}}},ResponderTouchHistoryStore:l={touchHistory:{numberActiveTouches:0}}};export{f as ResponderEventPlugin,l as ResponderTouchHistoryStore,v as injectEventPluginsByName};
//# sourceMappingURL=index.js.map
